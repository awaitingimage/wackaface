import Mole from "./Mole.js";

export default class Cake extends Mole {
  constructor(gridArea, callback) {
    super(gridArea, callback);
    this.type = "cake";
    this.points = 30;
    this.timeAlive = 1000;
    this.removeTime = 1000;
    this.svg = `
    <svg viewBox="0 0 911 589" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g id="cake">
    <g id="plate">
    <ellipse cx="454.798" cy="439.093" rx="454.5" ry="148.819" transform="rotate(0.115027 454.798 439.093)" fill="#C4C4C4" style="mix-blend-mode:darken"/>
    </g>
    <g id="cake-inner-layers">
    <path d="M756.52 390.092L455.022 327.486L454.856 410.163L756.354 472.769L756.52 390.092Z" fill="#F9B31F"/>
    <path d="M756.736 282.612L455.238 220.006L455.072 302.683L756.57 365.289L756.736 282.612Z" fill="#F9B31F"/>
    <path d="M756.951 175.132L455.453 112.526L455.287 195.203L756.785 257.809L756.951 175.132Z" fill="#F9B31F"/>
    </g>
    <g id="cake-layers">
    <path d="M95.3889 409.441C83.6652 486.044 251.768 550.732 454.582 546.58C519.206 546.71 579.858 541.537 632.279 532.373L632.329 507.57C579.907 516.734 519.256 521.907 454.632 521.777C256.104 521.378 95.2652 471.084 95.3889 409.441Z" fill="#532916"/>
    <path d="M756.304 497.572C795.006 482.819 820.628 435.506 814.324 410.885C814.281 432.43 790.442 455.779 756.354 472.769L454.856 410.163L454.807 434.966L756.304 497.572Z" fill="#532916"/>
    <path d="M95.6048 301.962C94.9851 306.01 95.0252 322.526 95.3889 326.5C101.906 397.71 262.704 443.033 454.798 439.1C519.422 439.23 580.073 434.057 632.495 424.893L632.545 400.09C580.123 409.254 519.472 414.427 454.848 414.297C256.32 413.898 95.481 363.604 95.6048 301.962Z" fill="#532916"/>
    <path d="M756.52 390.092C790.207 377.251 813.1 350.742 814.54 325C814.754 321.167 815.357 306.596 814.54 303.405C814.496 324.95 790.658 348.3 756.57 365.289L455.072 302.683L455.022 327.486L756.52 390.092Z" fill="#532916"/>
    <path d="M95.8205 194.482C95.2018 198.524 95.2433 215.533 95.6048 219.5C102.093 290.719 262.901 335.553 455.014 331.62C519.638 331.75 580.289 326.577 632.711 317.413L632.761 292.61C580.339 301.774 519.687 306.947 455.064 306.817C256.535 306.419 95.6967 256.124 95.8205 194.482Z" fill="#532916"/>
    <path d="M756.736 282.612C790.214 269.851 813.05 244.226 814.755 218.5C815.021 214.485 815.606 199.248 814.755 195.925C814.712 217.47 790.873 240.82 756.786 257.809L455.288 195.203L455.238 220.006L756.736 282.612Z" fill="#532916"/>
    </g>
    <g id="cake-filling">
    <path d="M95.5547 326.765C95.431 388.407 256.27 438.702 454.798 439.1C519.422 439.23 580.073 434.057 632.495 424.893L632.329 507.57C579.907 516.734 519.256 521.907 454.632 521.777C256.104 521.378 95.265 471.084 95.3887 409.441L95.5547 326.765Z" fill="#9F754C"/>
    <path d="M756.52 390.092C790.608 373.103 814.446 349.753 814.49 328.208L814.324 410.885C814.28 432.43 790.442 455.779 756.354 472.769L756.52 390.092Z" fill="#9F754C"/>
    <path d="M95.7705 219.285C95.6468 280.927 256.486 331.222 455.014 331.62C519.638 331.75 580.289 326.577 632.711 317.413L632.545 400.09C580.123 409.254 519.472 414.427 454.848 414.297C256.32 413.899 95.4808 363.604 95.6046 301.962L95.7705 219.285Z" fill="#9F754C"/>
    <path d="M756.736 282.612C790.823 265.623 814.662 242.273 814.705 220.728L814.539 303.405C814.496 324.95 790.657 348.3 756.57 365.289L756.736 282.612Z" fill="#9F754C"/>
    <path d="M95.9862 111.805C95.8624 173.447 256.701 223.742 455.23 224.14C519.853 224.27 580.505 219.097 632.927 209.933L632.761 292.61C580.339 301.774 519.687 306.947 455.064 306.817C256.535 306.418 95.6964 256.124 95.8202 194.482L95.9862 111.805Z" fill="#9F754C"/>
    <path d="M756.951 175.132C791.039 158.143 814.878 134.793 814.921 113.248L814.755 195.925C814.712 217.47 790.873 240.82 756.785 257.809L756.951 175.132Z" fill="#9F754C"/>
    </g>
    <path id="cake-top" d="M95.9827 111.805C95.859 173.447 256.698 223.742 455.226 224.14C519.85 224.27 580.501 219.097 632.923 209.933L455.45 112.526L756.948 175.132C791.036 158.143 814.874 134.793 814.918 113.248C815.041 51.6054 654.203 1.31105 455.674 0.912478C257.146 0.513911 96.1065 50.162 95.9827 111.805Z" fill="#502514"/>
    </g>
    </svg>
    `;
  }

  render(grid) {
    let svgElement = $(this.svg);
    svgElement.click($.proxy(this.kill, this));
    this.divElement = $(`<div class="${this.type}"></div>`).append(svgElement);
    this.divElement.css("grid-area", this.gridArea);
    grid.append(this.divElement);

    setTimeout(this.removeWithoutKill.bind(this), this.timeAlive);
  }
}
